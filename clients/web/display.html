<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Render by Accretion Display</title>
        <script src="js/global.js"></script>
        <script src="js/voxel.js"></script>
        <link rel="stylesheet" type="text/css" href="css/layout.css">
        <link rel="stylesheet" type="text/css" href="css/control.css">
        <link rel="stylesheet" type="text/css" href="css/stage.css">
        <link rel="stylesheet" type="text/css" href="css/voxel.css">
        <script>
            var rightViewCounter = 0;
            var upViewCounter = 0;
            var leftViewCounter = 0;
            var downViewCounter = 0;
function showViewCounters(){
    alert("right: " + rightViewCounter + ", up: " + upViewCounter + ", left: " + leftViewCounter + ", down: " + downViewCounter);
}
function getViewCounters(){
    return rightViewCounter + ":" + upViewCounter + ":" + leftViewCounter + ":" + downViewCounter;
}
            function updateViewDirection(direction){
                switch (direction) {
                    case "right":
                        leftViewCounter -= 1;
                        if(leftViewCounter < 0){
                            leftViewCounter = 3;
                        }
                        rightViewCounter += 1;
                        if(rightViewCounter == 4){
                            rightViewCounter = 0;
                        }
//showViewCounters();
                        break;
                    case "up":
                        downViewCounter -= 1;
                        if(downViewCounter < 0){
                            downViewCounter = 3;
                        }
                        upViewCounter += 1;
                        if(upViewCounter == 4){
                            upViewCounter = 0;
                        }
//showViewCounters();
                        break;
                    case "left":
                        rightViewCounter -= 1;
                        if(rightViewCounter < 0){
                            rightViewCounter = 3;
                        }
                        leftViewCounter += 1;
                        if(leftViewCounter == 4){
                            leftViewCounter = 0;
                        }
//showViewCounters();
                        break;
                    case "down":
                        upViewCounter -= 1;
                        if(upViewCounter < 0){
                            upViewCounter = 3;
                        }
                        downViewCounter += 1;
                        if(downViewCounter == 4){
                            downViewCounter = 0;
                        }
//showViewCounters();
                        break;
                }
            }
            function changeVoxelDirectionByView(direction){
                if(direction == "right"){
                    switch(getViewCounters()){
/*right*/
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
/*right, up*/
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "1:2:3:2":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                    }
                }
                else if(direction == "up"){
/*up*/
                    switch(getViewCounters()){
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
/*up, left*/
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
/*extra*/
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "1:2:3:2":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                    }
                }
                else if(direction == "left"){
                    switch(getViewCounters()){
/*left*/
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
/*left, down*/
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "3:2:1:2":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "1:2:3:2":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                    }
                }
                else if(direction == "down"){
                    switch(getViewCounters()){
/*down*/
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
/*down, right*/
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
/*extra*/
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "1:2:3:2":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                    }
                }
                else if(direction == "in"){
                    switch(getViewCounters()){
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                    }
                }
                else if(direction == "out"){
                    switch(getViewCounters()){
                        case "0:0:0:0":
                            updateGridOnMouseDown('{\'voxel\':\'out\'}');
                            break;
                        case "1:0:3:0":
                            updateGridOnMouseDown('{\'voxel\':\'left\'}');
                            break;
                        case "2:0:2:0":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "3:0:1:0":
                            updateGridOnMouseDown('{\'voxel\':\'right\'}');
                            break;
                        case "0:1:0:3":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "0:2:0:2":
                            updateGridOnMouseDown('{\'voxel\':\'in\'}');
                            break;
                        case "0:3:0:1":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "1:3:3:1":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "2:3:2:1":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "3:3:1:1":
                            updateGridOnMouseDown('{\'voxel\':\'up\'}');
                            break;
                        case "1:1:3:3":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "2:1:2:3":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                        case "3:1:1:3":
                            updateGridOnMouseDown('{\'voxel\':\'down\'}');
                            break;
                    }
                }
            }
        </script>
    </head>
    <body onkeydown='rotateByArrowKeys(event);'>
        <div class="column-left vertical-horizontal-center columnHeight">
            <div class="buttonPanel">
                <textarea id="importExport" style="width:11.65rem;height:6rem;"></textarea>
                <div class="button button-column-left" onclick="transform('{\'stage\':\'import\'}')"><p>import</p></div>
                <div class="button button-column-center" onclick="transform('{\'stage\':\'pitchCW\'}');updateViewDirection('up');" ontouch="transform('{\'stage\':\'pitchCW\'}')"><p>&uarr;</p></div>
                <div class="button button-column-right" onclick="transform('{\'stage\':\'reset\'}')" ontouch="transform('{\'stage\':\'reset\'}')"><p>reset</p></div>
                <br>
                <div class="button button-column-left" onclick="transform('{\'stage\':\'yawCW\'}');updateViewDirection('left');" ontouch="transform('{\'stage\':\'yawCW\'}')"><p>&larr;</p></div>
                <div class="button button-column-center" onclick="transform('{\'stage\':\'center\'}')" ontouch="transform('{\'stage\':\'center\'}')"><p>center</p></div>
                <div class="button button-column-right" onclick="transform('{\'stage\':\'yawCCW\'}');updateViewDirection('right');" ontouch="transform('{\'stage\':\'yawCCW\'}')"><p>&rarr;</p></div>
                <br>
                <div class="button button-column-left" onclick="transform('{\'stage\':\'export_default\'}')"><p>export default</p></div>
                <div class="button button-column-center" onclick="transform('{\'stage\':\'pitchCCW\'}');updateViewDirection('down');" ontouch="transform('{\'stage\':\'pitchCCW\'}')"><p>&darr;</p></div>
                <div class="button button-column-right" onclick="transform('{\'stage\':\'export_blender\'}')"><p>export blender</p></div>
            </div>
        </div>
        <!--Stage object, a cube consisting of six face elements.-->
        <div id="stage" class="column-center">
            <div id="cube" onclick='rotateByMouse(event);'>
                <!--top-->
                <div id="face1" class="face"></div>
                <!--front-->
                <div id="face2" class="face two"></div>
                <!--right-->
                <div id="face3" class="face three"><!--<img class="view" src="images/left.png">--></div>
                <!--back-->
                <div id="face4" class="face four"><img class="view" src="images/front.jpg"></div>
                <!--left-->
                <div id="face5" class="face five"><!--<img class="view" src="images/right.png">--></div>
                <!--bottom-->
                <div id="face6" class="face six"><!--<img class="view" src="images/top.png">--></div>
            </div>
        </div>
        <div class="column-right vertical-horizontal-center columnHeight">
            <div class="buttonPanel" style="margin: 0">
                <div class="button button-column-left"></div>
                <div class="button button-column-center" onmousedown="changeVoxelDirectionByView('up');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('up');" ontouchend="updateGridOnMouseUp();"><p>&uarr;</p></div>
                <div class="button button-column-right"></div>
                <br>
                <div class="button button-column-left" onmousedown="changeVoxelDirectionByView('left');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('left');" ontouchend="updateGridOnMouseUp();"><p>&larr;</p></div>
                <div class="button button-column-center" onclick="transform('{\'vertex\':\'add\'}');" ontouch="('{\'vertex\':\'add\'}');"><p>&#9632;</p></div>
                <div class="button button-column-right" onmousedown="changeVoxelDirectionByView('right');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('right');" ontouchend="updateGridOnMouseUp();"><p>&rarr;</p></div>
                <br>
                <div class="button button-column-left" onmousedown="changeVoxelDirectionByView('in');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('in');" ontouchend="updateGridOnMouseUp();"><p>&#x2297</p></div>
                <div class="button button-column-center" onmousedown="changeVoxelDirectionByView('down');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('down');" ontouchend="updateGridOnMouseUp();"><p>&darr;</p></div>
                <div class="button button-column-right" onmousedown="changeVoxelDirectionByView('out');" onmouseup="updateGridOnMouseUp();" ontouchstart="changeVoxelDirectionByView('out');" ontouchend="updateGridOnMouseUp();"><p>&#x2299</p></div>
                <br>
                <div class="button button-column-left" onclick="transform('{\'vertex\':\'back\'}');" ontouch="transform('{\'vertex\':\'back\'}');"><p><<</p></div>
                <div class="button button-column-center" onclick="transform('{\'vertex\':\'delete\'}');" ontouch="transform('{\'vertex\':\'delete\'}');"><p>x</p></div>
                <div class="button button-column-right" onclick="transform('{\'vertex\':\'forward\'}');" ontouch="transform('{\'vertex\':\'forward\'}');"><p>>></p></div>
            </div>
        </div>
    </body>
    <script>
        //A cursor voxel must be created directly after the entire page has finished loading.
        createCursor();
    </script>
    <script src="js/stage.js"></script>
    <script src="js/control.js"></script>
</html>